% Language package
% \usepackage[english]{babel}
\usepackage[spanish]{babel}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% FILLING %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{lipsum} 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% FILLING %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Special fonts
\usepackage[T1]{fontenc}
% \usepackage{kpfonts}
% \usepackage{lmodern}
% \usepackage[utf8]{inputenc}  

% Afterpage function
\usepackage{afterpage}

% Label references
% \usepackage{nameref}

% Cross file references
% \usepackage{xr}

% Glossary
\usepackage[acronym,toc]{glossaries}
\makenoidxglossaries

% No chapter name in header
\usepackage{fancyhdr}
\pagestyle{fancy}
\renewcommand{\headrulewidth}{0pt}
\fancyhead{}

% Table of contents links
\usepackage{hyperref}
\hypersetup{
    colorlinks,
    citecolor=black,
    filecolor=black,
    linkcolor=black,
    urlcolor=blue
    }
    
  
% Captions configurations
\usepackage[skip=4pt]{caption}
\setlength{\belowcaptionskip}{-5pt}
% \setlength{\abovecaptionskip}{0pt plus 3pt minus 2pt}

% More font sizes
\usepackage{anyfontsize}
% Font colors
\usepackage[dvipsnames, table]{xcolor}
\definecolor{listingbg}{HTML}{f8f8f8}

% Ident for first paragraph
\usepackage{indentfirst}


% Chapter titles modifyers
\usepackage{titlesec}
\newcommand*{\justifyheading}{\raggedleft}
\titleformat{\chapter}[display]
  {\vspace{-3cm}
      \normalfont\Huge\bfseries\justifyheading}
  {\color{gray} \fontsize{120}{120}\selectfont \thechapter}
  {0pt}{\fontsize{48}{48}\selectfont}
\titleformat{\section}
  {\normalfont\Large\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}
  {\normalfont\large\bfseries}{\thesubsection}{1em}{}
% Chapter spacing
\titlespacing{\chapter}{0pt}{60pt}{40pt}

% Disable autoindent
\usepackage{parskip}

% Subfiles
\usepackage{subfiles}

% Images
\usepackage{graphicx}
\graphicspath{ {./images/} }

% Required for m column specifier
\usepackage{array}

% Advanced graphics library
\usepackage{tikz}
\usepackage[a4paper,bindingoffset=0.2in,%
left=1in,right=1in,top=1in,bottom=1in,%
footskip=.5in]{geometry}
\linespread{1.25}

% Widow/orphan fix
% \widowpenalty10000
% \clubpenalty10000
\usepackage[all]{nowidow}

% \usepackage{couriers}

% Verbatim listings
\renewcommand{\ttdefault}{pcr}
\usepackage{listings}
\lstset{
backgroundcolor=\color{listingbg},
basicstyle=\small\ttfamily,
showstringspaces=false,
columns=flexible,
breaklines=true,
breakatwhitespace=true,
alsoletter={;=},
breakindent=0pt,
keepspaces=true,
showtabs=false,
% Nice tilde in listings 
literate={~}{{\fontfamily{ptm}\selectfont \textasciitilde}}1,
% literate={\\\'}{}{},
% Insert breaklines with \-
literate={\\\-}{}{0\discretionary{{\normalfont\LARGE -}}{}{}}
}

% Spacing between sentences of one space character
%\frenchspacing

% Wrap figures with text
\usepackage{wrapfig}

% Bibliography/References
\addto{\captionsenglish}{%
  \renewcommand{\bibname}{References}
}
\usepackage[nottoc,numbib]{tocbibind}
\renewcommand{\UrlFont}{\ttfamily\small}

% Relax hbox errors for glossaries
\usepackage{etoolbox}
\apptocmd{\sloppy}{\hbadness 10000\relax}{}{}

% Appendix
\usepackage[title,titletoc]{appendix}

% vbox error mitigation
\raggedbottom


% Fix subsections figure displacements
\usepackage{placeins}

\let\Oldsection\section
\renewcommand{\section}{\FloatBarrier\Oldsection}

\let\Oldsubsection\subsection
\renewcommand{\subsection}{\FloatBarrier\Oldsubsection}

\let\Oldsubsubsection\subsubsection
\renewcommand{\subsubsection}{\FloatBarrier\Oldsubsubsection}